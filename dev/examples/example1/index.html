<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Example 1 · SimpleStatics.jl</title><meta name="title" content="Example 1 · SimpleStatics.jl"/><meta property="og:title" content="Example 1 · SimpleStatics.jl"/><meta property="twitter:title" content="Example 1 · SimpleStatics.jl"/><meta name="description" content="Documentation for SimpleStatics.jl."/><meta property="og:description" content="Documentation for SimpleStatics.jl."/><meta property="twitter:description" content="Documentation for SimpleStatics.jl."/><meta property="og:url" content="https://Boxylmer.github.io/SimpleStatics.jl/examples/example1/"/><meta property="twitter:url" content="https://Boxylmer.github.io/SimpleStatics.jl/examples/example1/"/><link rel="canonical" href="https://Boxylmer.github.io/SimpleStatics.jl/examples/example1/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">SimpleStatics.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../example workflow/">Example Workflow</a></li><li><span class="tocitem">Examples</span><ul><li class="is-active"><a class="tocitem" href>Example 1</a><ul class="internal"><li><a class="tocitem" href="#d1_part1"><span>1. Making the setup function</span></a></li><li><a class="tocitem" href="#d1_part2"><span>2. Generating some trusses and analyzing their properties.</span></a></li><li><a class="tocitem" href="#d1_part3"><span>3. Viewing stresses rather than forces, and identifying weak members.</span></a></li><li><a class="tocitem" href="#d1_part4"><span>4. Increasing the load.</span></a></li></ul></li></ul></li><li><a class="tocitem" href="../../reference/">Index</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Examples</a></li><li class="is-active"><a href>Example 1</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Example 1</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/Boxylmer/SimpleStatics.jl/blob/main/docs/src/examples/example1.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Example-1-Mild-Steel-Warren-Truss"><a class="docs-heading-anchor" href="#Example-1-Mild-Steel-Warren-Truss">Example 1 - Mild Steel Warren Truss</a><a id="Example-1-Mild-Steel-Warren-Truss-1"></a><a class="docs-heading-anchor-permalink" href="#Example-1-Mild-Steel-Warren-Truss" title="Permalink"></a></h1><p>In this example, we&#39;re going to play around with a few design parameters for a Warren-like steel truss with verticals, where we want to see what size of materials we can get away with in certain sections of the truss in order to minimize the cost. </p><p>We will do this by:</p><ol><li><a href="#d1_part1">Making a function that will generate a truss based on a few parameters.</a></li><li><a href="#d1_part2">Generating a number of trusses with a certain load and analyzing it.</a></li><li><a href="#d1_part3">Viewing stresses and finding structural weak points.</a></li><li><a href="#d1_part4">Seeing what happens under extreme loads.</a></li></ol><h2 id="d1_part1"><a class="docs-heading-anchor" href="#d1_part1">1. Making the setup function</a><a id="d1_part1-1"></a><a class="docs-heading-anchor-permalink" href="#d1_part1" title="Permalink"></a></h2><p>The first thing we need to do is make a function that will generate a truss for us, given a few parameters. Here, we&#39;ll focus on making the function <code>build_truss</code>, where the number of cross member sections (<em>n</em>), the width, height, and top load will be considered. </p><p>We will start by making the geometry of the system. </p><pre><code class="language-julia hljs">using SimpleStatics

width = (23 * 12 + 10) * 0.0254 # 23&#39;, 10&quot; long -&gt; Meters
height = 18 * 0.0254 # 18&quot; tall -&gt; Meters</code></pre><p>I&#39;ll introduce this function all at once, but we&#39;ll go over every part in detail after that!</p><pre><code class="language-julia hljs">function build_truss(width_m, height_m, n, top_load = 0;
    thick_material=Materials.SquareTubing(Materials.MildSteel, 1.5 * 0.0381, 1.897 / 1000),   # 1.5&quot; steel tubing with 14 gauge thickness
    medium_material=Materials.SquareTubing(Materials.MildSteel, 1.0 * 0.0381, 1.518 / 1000),  # 1.0&quot; steel tubing with 16 gauge thickness
    thin_material=Materials.SquareTubing(Materials.MildSteel, 0.75 * 0.0381, 1.518 / 1000)    # .75&quot; steel tubing with 16 gauge thickness
    )

    s = StaticSetup()

    m = width_m / (2*n)

    top_joint_indices = []
    for m in range(0, width_m, 2n + 1)
        j = add_joint!(s, m, height_m)
        push!(top_joint_indices, j)
    end

    bottom_joint_indices = []
    for m in range(m, width_m - m, n)
        j = add_joint!(s, m, 0)
        push!(bottom_joint_indices, j)
    end

    top_bar_members = []
    for i in top_joint_indices[1:end-1]
        m = add_member!(s, i, i+1)
        push!(top_bar_members, m, thick_material)
    end

    bottom_bar_members = []
    for i in bottom_joint_indices[1:end-1]
        m = add_member!(s, i, i+1)
        push!(bottom_bar_members, m, medium_material)
    end

    cross_members = []
    for i in 1:n
        for j in -1:1
            m = add_member!(s, bottom_joint_indices[i], top_joint_indices[2*i + j], thin_material)
            push!(cross_members, m)
        end
    end
    set_constraint!(s, top_joint_indices[1], AnchorConstraint())
    set_constraint!(s, top_joint_indices[end], XRollerConstraint())

    SimpleStatics.add_member_weights!(s)
    # add_force!(s, top_joint_indices[n+1], 0, -top_load) # middle of top bar
    for i in top_joint_indices
        add_force!(s, i, 0, -top_load/length(top_joint_indices))
    end
    return s
end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">build_truss (generic function with 2 methods)</code></pre><p>So that was a bit of code to chew on all at once. Before we pick this apart, lets just take a look at what this function creates with n=3 to make sure that it works.</p><pre><code class="language-julia hljs">plot_setup(build_truss(width, height, 3), dsize=1500)</code></pre><img src="0308cf15.svg" alt="Example block output"/><p>So, in this function we start by defining some materials and dimensions, as well as the number of cross member repeat units <code>n</code> and the <code>top_load</code> that will be distributed over our truss itself. </p><pre><code class="language-Julia hljs">function build_truss(width_m, height_m, n, top_load = 0; 
    thick_material=Materials.SquareTubing(Materials.MildSteel, 1.5 * 0.0381, 1.897 / 1000),   # 1.5&quot; steel tubing with 14 gauge thickness
    medium_material=Materials.SquareTubing(Materials.MildSteel, 1.0 * 0.0381, 1.518 / 1000),  # 1.0&quot; steel tubing with 16 gauge thickness
    thin_material=Materials.SquareTubing(Materials.MildSteel, 0.75 * 0.0381, 1.518 / 1000)    # .75&quot; steel tubing with 16 gauge thickness
    )</code></pre><p>Then, we start initialize our setup and define <code>segment_length</code>, or the length of each member of the top bar in the truss. A truss with <code>n</code> repeats will have <code>2n+1</code> joints in its top bar.</p><pre><code class="language-Julia hljs">s = StaticSetup()
    
segment_len = width_m / (2*n)

top_joint_indices = []
for m in range(0, width_m, 2n + 1)
    j = add_joint!(s, m, height_m)
    push!(top_joint_indices, j)
end</code></pre><p>And <code>n</code> joints at the bottom bar, which is two <code>segment_lengths</code> shorter than the top bar, so we have to shift the starting joint in by a <code>segment_length</code> and stop one <code>segment_length</code> early. </p><pre><code class="language-Julia hljs">bottom_joint_indices = []
for m in range(segment_len, width_m - segment_len, n)
    j = add_joint!(s, m, 0)
    push!(bottom_joint_indices, j)
end</code></pre><p>We can then connect all the top and bottom truss members, recording their indexes while doing so.</p><pre><code class="language-Julia hljs">top_bar_members = []
for i in top_joint_indices[1:end-1]
    m = add_member!(s, i, i+1)
    push!(top_bar_members, m, thick_material)
end

bottom_bar_members = []
for i in bottom_joint_indices[1:end-1]
    m = add_member!(s, i, i+1)
    push!(bottom_bar_members, m, medium_material)
end</code></pre><p>We can visualize what we&#39;ve created so far with our <a href="../../reference/#SimpleStatics.plot_setup"><code>plot_setup(setup)</code></a> function</p><pre><code class="language-julia hljs">truss = build_truss(width, height, 3)
plot_setup(truss)</code></pre><img src="c66db9ad.svg" alt="Example block output"/><p>Looks good so far! For the cross members, we want each bottom member to connect to its respective closest three top members.</p><pre><code class="language-Julia hljs">cross_members = []
for i in 1:n
    for j in -1:1
        m = add_member!(s, bottom_joint_indices[i], top_joint_indices[2*i + j], thin_material)
        push!(cross_members, m)
    end
end</code></pre><p>Lets see how this looks now. </p><pre><code class="language-julia hljs">truss = build_truss(width, height, 3)
plot_setup(truss)</code></pre><img src="0075933f.svg" alt="Example block output"/><p>Looks good! Finally, we want to add constraints to the first and last top member, so that the truss is held essentially by a fixed point and is able to freely expand and contract horizontally under load. </p><pre><code class="language-Julia hljs">set_constraint!(s, top_joint_indices[1], AnchorConstraint())
set_constraint!(s, top_joint_indices[end], XRollerConstraint())</code></pre><p>Finally, we want to add loads to this structure, both from the <code>top_load</code> as well as the weights that the members themselves exert on it. Thankfully, we have the convenience function <a href="../../reference/#SimpleStatics.add_member_weights!-Tuple{StaticSetup}"><code>add_member_weights!(setup)</code></a> to do this for us. </p><pre><code class="language-Julia hljs">SimpleStatics.add_member_weights!(s)
for i in top_joint_indices
    add_force!(s, i, 0, -top_load/length(top_joint_indices)) 
end</code></pre><p>We can visualize this final setup function and see that the forces and member weights were all applied. </p><pre><code class="language-julia hljs">truss = build_truss(width, height, 3)
plot_setup(truss)</code></pre><img src="416d7509.svg" alt="Example block output"/><p>Looks like we&#39;re ready to move on!</p><h2 id="d1_part2"><a class="docs-heading-anchor" href="#d1_part2">2. Generating some trusses and analyzing their properties.</a><a id="d1_part2-1"></a><a class="docs-heading-anchor-permalink" href="#d1_part2" title="Permalink"></a></h2><p>Now we can generate a few structures with different values of <code>n</code>, seeing how it affects the weight and strength of our structure.  Lets try n values from 1 to 10 and look at 1, 5, and 10 to see what&#39;s going on. </p><pre><code class="language-julia hljs">width = (23 * 12 + 10) * 0.0254 # 23&#39;, 10&quot; long -&gt; Meters
height = 18 * 0.0254 # 18&quot; tall -&gt; Meters
load = 500 * 0.453592 * 9.81 # lbf -&gt; N, 500 lb load
nvals = 1:10
trusses = [build_truss(width, height, nval, load) for nval in nvals]

plot_setup(trusses[1], dsize=2400)
plot_setup(trusses[5], dsize=2400)
plot_setup(trusses[10], dsize=2400)</code></pre><img src="b8b81ce4.svg" alt="Example block output"/><img src="da01f512.svg" alt="Example block output"/><img src="a1223c85.svg" alt="Example block output"/><p>This is in line with what we expected. Lets look at how much each truss weighs. </p><pre><code class="language-julia hljs">mass.(trusses) .* 2.20462  # kg -&gt; lbs</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">10-element Vector{Float64}:
 21.976536545521984
 23.746595969880484
 25.81242069250016
 28.144134871246273
 30.707550312022075
 33.46831741325648
 36.394655803347284
 39.458700441922076
 42.636849811263254
 45.909536643712684</code></pre><p>And finally we can solve the entire system and visualize the results for a couple structures. This time we&#39;ll hide the labels as well to be able to see more clearly. </p><pre><code class="language-julia hljs">displacements = solve_displacements.(trusses)
forces = solve_member_forces.(trusses, displacements)
reactions = solve_reaction_forces.(trusses, displacements)
member_stresses = solve_member_stresses.(trusses, forces)


plot_setup(trusses[1]; displacements=displacements[1], member_forces=forces[1], reactions=reactions[1], draw_labels=false)
plot_setup(trusses[5]; displacements=displacements[5], member_forces=forces[5], reactions=reactions[5], draw_labels=false)
plot_setup(trusses[10]; displacements=displacements[10], member_forces=forces[10], reactions=reactions[10], draw_labels=false)</code></pre><img src="35fb4254.svg" alt="Example block output"/><img src="d995bb77.svg" alt="Example block output"/><img src="11c4294c.svg" alt="Example block output"/><p>The reaction forces quickly become too large to view on screen, but this is simply because the additional cross members make the structure heavier.</p><h2 id="d1_part3"><a class="docs-heading-anchor" href="#d1_part3">3. Viewing stresses rather than forces, and identifying weak members.</a><a id="d1_part3-1"></a><a class="docs-heading-anchor-permalink" href="#d1_part3" title="Permalink"></a></h2><p>Interestingly, we can also view the maximum stress in the structure to see which members are bottlenecking our truss strength. </p><div class="admonition is-success"><header class="admonition-header">Stresses, not forces, are usually what you want to see.</header><div class="admonition-body"><p>The default member property to view in the <code>plot_setup</code> function is <em>force</em>, however, it is often more useful to view <em>stress</em>, which is a better indicator of how close a member is to reaching its yield point, or the stress at which permanent deformation (and therefore damage) to the member begins to occur.</p></div></div><p>This is useful as some members may be under comparitively little force but are very close to their yield point as they are thin, or you may want to identify members that are too thick and can be replaced with thinner materials you have on hand without jeopardizing the strength of the structure. </p><pre><code class="language-julia hljs">max_stresses = maximum.(member_stresses)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">10-element Vector{Float64}:
 4.531597867456618e6
 5.840644324978688e6
 8.684378825001318e6
 8.875092204986902e6
 8.619573018195923e6
 8.32771777490074e6
 8.08352371992318e6
 7.896893429192175e6
 7.760508372398972e6
 7.664416633273732e6</code></pre><p>One interesting thing to note in our structure is that we distributed the load <em>perfectly</em> over all the top joints, meaning we accidentally created an edge case where some portion of the load, specifcally <span>$(2/2n+1)$</span> of our load, was distributed to <em>constrained joints</em>, which will not affect the system at all. As a consequence, the first three or so trusses actually appear to experience <em>less</em> stress than the trusses with more members. For now, we can ignore this, and look further to looking at <em>stress utilization</em> rather than <em>stress</em> outright. </p><pre><code class="language-julia hljs">max_stresses = maximum.(solve_stress_utilization.(trusses, member_stresses))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">10-element Vector{Float64}:
 0.018496317826353543
 0.023839364591749745
 0.03544644418367885
 0.03622486614280368
 0.03518193068651397
 0.033990684795513225
 0.032993974367033385
 0.03223221807833541
 0.03167554437713866
 0.03128333319703564</code></pre><p>It looks like this was a non issue for our larger trusses, as we never really end up using more than about 3.5% of our structures strength. </p><p>To visualize this, lets hand <code>member_forces</code> our <code>member_stresses</code> rather than the <code>forces</code> themselves. </p><pre><code class="language-julia hljs">plot_setup(trusses[1]; dsize=1000, displacements=displacements[1], member_forces=member_stresses[1], reactions=reactions[1], draw_labels=false)</code></pre><img src="0a27d3c3.svg" alt="Example block output"/><pre><code class="language-julia hljs">plot_setup(trusses[5]; dsize=1000, displacements=displacements[5], member_forces=member_stresses[5], reactions=reactions[5], draw_labels=false)</code></pre><img src="cd1754ad.svg" alt="Example block output"/><pre><code class="language-julia hljs">plot_setup(trusses[10]; dsize=1000, displacements=displacements[10], member_forces=member_stresses[10], reactions=reactions[10], draw_labels=false)</code></pre><img src="f0d0003c.svg" alt="Example block output"/><p>Interesting! So the cross members are under the most stress. This makes sense, as they&#39;re made from the thinnest material we had. Note that since stress is the force normalized by the materials cross sectional area, the member highlighting would be the same for either property if all members were the made from the same material. </p><h2 id="d1_part4"><a class="docs-heading-anchor" href="#d1_part4">4. Increasing the load.</a><a id="d1_part4-1"></a><a class="docs-heading-anchor-permalink" href="#d1_part4" title="Permalink"></a></h2><p>For the sake of seeing deformations, lets increase the load until we see some interesting changes in our structure. </p><pre><code class="language-julia hljs">load = 100000 * 0.453592 * 9.81 # lbf -&gt; N, 100000 lb load
tr = build_truss(width, height, 5, load)
displacements = solve_displacements(tr)
forces = solve_member_forces(tr, displacements)
reactions = solve_reaction_forces(tr, displacements)
member_stresses = solve_member_stresses(tr, forces)
plot_setup(tr; dsize=1000, displacements=displacements, member_forces=member_stresses, reactions=reactions, draw_labels=false)</code></pre><img src="170f8c12.svg" alt="Example block output"/><p>Clearly this would destroy the truss, as we can see the stress utilization:</p><pre><code class="language-julia hljs">maximum(solve_stress_utilization(tr, member_stresses))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">6.605831195688546</code></pre><p>The cross member is under more then 6x its yield stress. </p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../example workflow/">« Example Workflow</a><a class="docs-footer-nextpage" href="../../reference/">Index »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.0.1 on <span class="colophon-date" title="Saturday 23 September 2023 01:41">Saturday 23 September 2023</span>. Using Julia version 1.9.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
